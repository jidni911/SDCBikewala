<div class="booking-banner" data-aos="fade-down">
    <div class="container text-center py-4">
        <h2 class="fw-bold mb-2 text-light">ðŸ“ž Call for Booking</h2>
        <p class="text-light mb-0 fs-5">Hotline: <strong>+880 1711-223344</strong></p>
    </div>
</div>

<div class="container my-4" data-aos="fade-up">
    <div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
        <h3 class="fw-semibold mb-2">All Bookings</h3>
        <input type="text" class="form-control search-input" placeholder="Search by name, issue, or status..."
            [(ngModel)]="searchText" />
    </div>

    <div class="table-responsive" data-aos="fade-up" data-aos-delay="200">
        <table class="table table-hover align-middle">
            <thead class="table-primary text-center">
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Issue</th>
                    <th>Status</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>ETA</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let booking of filteredBookings | slice:(page-1)*pageSize:(page-1)*pageSize+pageSize"
                    class="text-center" [ngClass]="{
            'table-success': booking.status === 'Completed',
            'table-warning': booking.status === 'Pending'
          }">
                    <td>{{ booking.id }}</td>
                    <td>{{ booking.name }}</td>
                    <td>{{ booking.issue }}</td>
                    <td>{{ booking.status }}</td>
                    <td>{{ booking.date }}</td>
                    <td>{{ booking.time }}</td>
                    <td>{{ booking.eta }}</td>
                    <td>
                        <button class="btn btn-outline-primary btn-sm" (click)="openBooking(booking)"
                            data-bs-toggle="modal" data-bs-target="#bookingModal">
                            View Details
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <div class="d-flex justify-content-between align-items-center flex-wrap mt-3">
        <p class="mb-2">
            Showing {{ (page - 1) * pageSize + 1 }}â€“
            {{ Math.min(page * pageSize, filteredBookings.length) }}
            of {{ filteredBookings.length }} bookings
        </p>

        <nav>
            <ul class="pagination pagination-sm mb-0">
                <li class="page-item" [class.disabled]="page === 1">
                    <button class="page-link" (click)="previousPage()">Previous</button>
                </li>
                <li class="page-item" *ngFor="let p of [].constructor(totalPages); let i = index"
                    [class.active]="page === i + 1">
                    <button class="page-link" (click)="setPage(i + 1)">{{ i + 1 }}</button>
                </li>
                <li class="page-item" [class.disabled]="page === totalPages">
                    <button class="page-link" (click)="nextPage()">Next</button>
                </li>
            </ul>
        </nav>
    </div>
</div>

<!-- ðŸªŸ Booking Details Modal -->
<div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content shadow-lg border-0" data-aos="zoom-in">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="bookingModalLabel">
                    Booking Details â€“ {{ selectedBooking?.name }}
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div *ngIf="selectedBooking">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>Email:</strong> {{ selectedBooking.email }}</p>
                            <p><strong>Phone:</strong> {{ selectedBooking.phone }}</p>
                            <p><strong>Address:</strong> {{ selectedBooking.address }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Date:</strong> {{ selectedBooking.date }}</p>
                            <p><strong>Time:</strong> {{ selectedBooking.time }}</p>
                            <p><strong>ETA:</strong> {{ selectedBooking.eta }}</p>
                        </div>
                    </div>
                    <div class="mt-3">
                        <p><strong>Issue:</strong> {{ selectedBooking.issue }}</p>
                        <p>
                            <strong>Status:</strong>
                            <span
                class="badge"
                [class.bg-success]="selectedBooking.status === 'Completed'"
                [class.bg-warning]="selectedBooking.status === 'Pending'"
              >
                {{ selectedBooking.status }}
              </span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>



<div class="text-center mt-4" data-aos="zoom-in">
      <a class="btn btn-danger px-5" routerLink="/booking/manage-booking">Manage</a>
    </div>
