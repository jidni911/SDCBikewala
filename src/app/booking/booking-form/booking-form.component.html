<div class="container py-5">
  <!-- Heading -->
  <div class="text-center mb-4" data-aos="fade-down">
    <h2 class="fw-bold text-danger">Book Your Cycle Service</h2>
    <p class="text-muted">Call now or schedule your booking online üö¥‚Äç‚ôÇÔ∏è</p>
  </div>

  <!-- Form -->
  <form (ngSubmit)="addBooking()" class="card shadow-sm p-4 mb-5" data-aos="fade-up">
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label fw-semibold">Full Name</label>
        <input type="text" [(ngModel)]="newBooking.name" name="name" class="form-control" required>
      </div>
      <div class="col-md-6">
        <label class="form-label fw-semibold">Email</label>
        <input type="email" [(ngModel)]="newBooking.email" name="email" class="form-control" required>
      </div>
      <div class="col-md-6">
        <label class="form-label fw-semibold">Phone</label>
        <input type="text" [(ngModel)]="newBooking.phone" name="phone" class="form-control" required>
      </div>
      <div class="col-md-6">
        <label class="form-label fw-semibold">Address</label>
        <input type="text" [(ngModel)]="newBooking.address" name="address" class="form-control">
      </div>
      <div class="col-md-6">
        <label class="form-label fw-semibold">Date</label>
        <input type="date" [(ngModel)]="newBooking.date" name="date" class="form-control" required>
      </div>
      <div class="col-md-6">
        <label class="form-label fw-semibold">Time</label>
        <input type="time" [(ngModel)]="newBooking.time" name="time" class="form-control" required>
      </div>
      <div class="col-md-12">
        <label class="form-label fw-semibold">Issue</label>
        <input type="text" [(ngModel)]="newBooking.issue" name="issue" class="form-control" placeholder="Describe your issue">
      </div>
      <div class="col-md-12">
        <label class="form-label fw-semibold">Status</label>
        <select class="form-select" [(ngModel)]="newBooking.status" name="status">
          <option value="Pending">Pending</option>
          <option value="Completed">Completed</option>
        </select>
      </div>
    </div>

    <div class="text-center mt-4">
      <button type="submit" class="btn btn-danger px-5">{{ editIndex !== null ? 'Update Booking' : 'Add Booking' }}</button>
    </div>
  </form>

  <!-- Search -->
  <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap" data-aos="fade-right">
    <input type="text" class="form-control w-50 mb-2" placeholder="Search bookings..." [(ngModel)]="searchTerm" (input)="filterBookings()">
    <span class="badge bg-danger p-2">{{ filteredBookings.length }} found</span>
  </div>

  <!-- Table -->
  <div class="table-responsive" data-aos="fade-up">
    <table class="table table-hover align-middle text-center">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Issue</th>
          <th>Date</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let booking of pagedBookings; let i = index">
          <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td>{{ booking.name }}</td>
          <td>{{ booking.issue }}</td>
          <td>{{ booking.date }}</td>
          <td>
            <span class="badge" [ngClass]="{'bg-warning text-dark': booking.status==='Pending', 'bg-success': booking.status==='Completed'}">
              {{ booking.status }}
            </span>
          </td>
          <td>
            <button class="btn btn-sm btn-outline-primary me-2" (click)="editBooking(i)">Edit</button>
            <button class="btn btn-sm btn-outline-danger" (click)="deleteBooking(i)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <nav *ngIf="totalPages > 1" class="mt-4 d-flex justify-content-center" data-aos="fade-up">
    <ul class="pagination">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="goToPage(currentPage - 1)">Prev</a>
      </li>

      <li *ngFor="let page of [].constructor(totalPages); let p = index" 
          class="page-item" [class.active]="currentPage === p + 1">
        <a class="page-link" (click)="goToPage(p + 1)">{{ p + 1 }}</a>
      </li>

      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="goToPage(currentPage + 1)">Next</a>
      </li>
    </ul>
  </nav>
</div>
